<script>
// keep the aspect of the gameplay area correct
(window.onresize = erisk.gameRenderer.preserveAspect)();

// start the game
window.onload = function() {
    setTimeout(function() {
        erisk.runSetupScreen();
        erisk.tutorialScreen();
    }, 10);
};

window.onbeforeunload = function () {
    return "Are you sure you want to leave?";
};


// calling GAS server function with promise
function promiseRun(func) {

  // convert the arguments array into an array, and drop the first one
  var runArgs = Array.prototype.slice.call(arguments).slice(1);

  return new Promise(function(resolve, reject) {
      google.script.run
         .withSuccessHandler(function(result) {
             resolve(result);
          })
         .withFailureHandler(function(error) {
             showError(error);
             reject(error);
         })
        [func].apply(this, runArgs);
  });
}


/**
 * Logs an error message and shows an alert to the user.
 */
function showError(error) {
    console.log(error);
    alert('Error: ' + error);
}
</script>
